{"version":3,"file":"iran-license-plate.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/iran-license-plate.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import templateHTML from './templates/iran-license-plate.html'; // Mark it as raw text\r\nimport templateCss from './css/iran-license-plate.css'; // No need to import as a string; Rollup will handle it.\r\n\r\nclass IranLicensePlate extends HTMLElement {\r\n    constructor() {\r\n        super();\r\n        this.attachShadow({ mode: 'open' });\r\n\r\n        // Variables to store the original dimensions.\r\n        this._originalWidth = null;\r\n        this._originalHeight = null;\r\n    }\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    connectedCallback() {\r\n        // Perform initial setup when the element is added to the DOM\r\n        this.render();\r\n\r\n        // Wait briefly to ensure the content is rendered and measured.\r\n        setTimeout(() => {\r\n            const plateElement = this.shadowRoot.querySelector('.plate');\r\n            // If not already stored, record the original dimensions.\r\n            if (!this._originalWidth || !this._originalHeight) {\r\n                const rect = plateElement.getBoundingClientRect();\r\n                this._originalWidth = rect.width;\r\n                this._originalHeight = rect.height;\r\n                console.log('Original dimensions:', this._originalWidth, this._originalHeight);\r\n            }\r\n            // Read user-specified width and height attributes (in pixels).\r\n            const desiredWidthAttr = this.getAttribute('width');\r\n            const desiredHeightAttr = this.getAttribute('height');\r\n            const desiredWidth = desiredWidthAttr ? parseFloat(desiredWidthAttr) : null;\r\n            const desiredHeight = desiredHeightAttr ? parseFloat(desiredHeightAttr) : null;\r\n\r\n            if (desiredWidth || desiredHeight) {\r\n                this.scaleToFit(desiredWidth, desiredHeight);\r\n            }\r\n        }, 0);\r\n    }\r\n\r\n    static get observedAttributes() {\r\n        return ['width', 'height'];\r\n    }\r\n\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        // When attributes change, re-scale using the stored original dimensions.\r\n        if (this._originalWidth && this._originalHeight) {\r\n            const desiredWidth = this.getAttribute('width') ? parseFloat(this.getAttribute('width')) : null;\r\n            const desiredHeight = this.getAttribute('height') ? parseFloat(this.getAttribute('height')) : null;\r\n            this.scaleToFit(desiredWidth, desiredHeight);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // Render the content into the shadow DOM.\r\n        this.shadowRoot.innerHTML = `\r\n      <style>\r\n        ${templateCss}\r\n      </style>\r\n      <div class=\"plate\">\r\n        ${templateHTML}\r\n      </div>\r\n    `;\r\n    }\r\n\r\n    calculateScaleFactor(desiredWidth, desiredHeight) {\r\n        // Use the original dimensions stored after initial rendering.\r\n        const originalWidth = this._originalWidth;\r\n        const originalHeight = this._originalHeight;\r\n\r\n        let scaleFactor;\r\n        if (desiredWidth && desiredHeight) {\r\n            const scaleW = desiredWidth / originalWidth;\r\n            const scaleH = desiredHeight / originalHeight;\r\n            scaleFactor = Math.min(scaleW, scaleH);\r\n        } else if (desiredWidth) {\r\n            scaleFactor = desiredWidth / originalWidth;\r\n        } else if (desiredHeight) {\r\n            scaleFactor = desiredHeight / originalHeight;\r\n        } else {\r\n            scaleFactor = 1;\r\n        }\r\n        return scaleFactor;\r\n    }\r\n\r\n    applyScaling(scaleFactor) {\r\n        const plateElement = this.shadowRoot.querySelector('.plate');\r\n        // Apply the scale transformation.\r\n        plateElement.style.transform = `scale(${scaleFactor})`;\r\n        plateElement.style.transformOrigin = 'top left';\r\n\r\n        // Update the host elementâ€™s size so that it occupies the correct space.\r\n        const scaledWidth = this._originalWidth * scaleFactor;\r\n        const scaledHeight = this._originalHeight * scaleFactor;\r\n        this.style.display = 'inline-block';\r\n        this.style.width = `${scaledWidth}px`;\r\n        this.style.height = `${scaledHeight}px`;\r\n    }\r\n\r\n    scaleToFit(desiredWidth, desiredHeight) {\r\n        const scaleFactor = this.calculateScaleFactor(desiredWidth, desiredHeight);\r\n        this.applyScaling(scaleFactor);\r\n    }\r\n}\r\ncustomElements.define('iran-license-plate', IranLicensePlate);\r\n\r\nexport default IranLicensePlate;"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","IranLicensePlate","HTMLElement","constructor","super","this","attachShadow","mode","_originalWidth","_originalHeight","connectedCallback","render","setTimeout","plateElement","shadowRoot","querySelector","rect","getBoundingClientRect","width","height","console","log","desiredWidthAttr","getAttribute","desiredHeightAttr","desiredWidth","parseFloat","desiredHeight","scaleToFit","observedAttributes","attributeChangedCallback","name","oldValue","newValue","innerHTML","templateCss","calculateScaleFactor","originalWidth","originalHeight","scaleFactor","scaleW","scaleH","Math","min","applyScaling","transform","transformOrigin","scaledWidth","scaledHeight","display","customElements","define"],"mappings":"iiDAAA,SAAqBA,EAAKC,QACX,IAARA,IAAiBA,EAAM,CAAA,GAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAQH,SAASI,cAAc,SACnCD,EAAME,KAAO,WAEI,QAAbN,GACEE,EAAKK,WACPL,EAAKM,aAAaJ,EAAOF,EAAKK,YAKhCL,EAAKO,YAAYL,GAGfA,EAAMM,WACRN,EAAMM,WAAWC,QAAUb,EAE3BM,EAAMK,YAAYR,SAASW,eAAed,GAnBY,CAqB1D,KCtBA,MAAMe,UAAyBC,YAC3B,WAAAC,GACIC,QACAC,KAAKC,aAAa,CAAEC,KAAM,SAG1BF,KAAKG,eAAiB,KACtBH,KAAKI,gBAAkB,IAC1B,CAGD,iBAAAC,GAEIL,KAAKM,SAGLC,YAAW,KACP,MAAMC,EAAeR,KAAKS,WAAWC,cAAc,UAEnD,IAAKV,KAAKG,iBAAmBH,KAAKI,gBAAiB,CAC/C,MAAMO,EAAOH,EAAaI,wBAC1BZ,KAAKG,eAAiBQ,EAAKE,MAC3Bb,KAAKI,gBAAkBO,EAAKG,OAC5BC,QAAQC,IAAI,uBAAwBhB,KAAKG,eAAgBH,KAAKI,gBACjE,CAED,MAAMa,EAAmBjB,KAAKkB,aAAa,SACrCC,EAAoBnB,KAAKkB,aAAa,UACtCE,EAAeH,EAAmBI,WAAWJ,GAAoB,KACjEK,EAAgBH,EAAoBE,WAAWF,GAAqB,MAEtEC,GAAgBE,IAChBtB,KAAKuB,WAAWH,EAAcE,EACjC,GACF,EACN,CAED,6BAAWE,GACP,MAAO,CAAC,QAAS,SACpB,CAED,wBAAAC,CAAyBC,EAAMC,EAAUC,GAErC,GAAI5B,KAAKG,gBAAkBH,KAAKI,gBAAiB,CAC7C,MAAMgB,EAAepB,KAAKkB,aAAa,SAAWG,WAAWrB,KAAKkB,aAAa,UAAY,KACrFI,EAAgBtB,KAAKkB,aAAa,UAAYG,WAAWrB,KAAKkB,aAAa,WAAa,KAC9FlB,KAAKuB,WAAWH,EAAcE,EACjC,CACJ,CAED,MAAAhB,GAEIN,KAAKS,WAAWoB,UAAY,4BAE1BC,ypBAML,CAED,oBAAAC,CAAqBX,EAAcE,GAE/B,MAAMU,EAAgBhC,KAAKG,eACrB8B,EAAiBjC,KAAKI,gBAE5B,IAAI8B,EACJ,GAAId,GAAgBE,EAAe,CAC/B,MAAMa,EAASf,EAAeY,EACxBI,EAASd,EAAgBW,EAC/BC,EAAcG,KAAKC,IAAIH,EAAQC,EAClC,MACGF,EADOd,EACOA,EAAeY,EACtBV,EACOA,EAAgBW,EAEhB,EAElB,OAAOC,CACV,CAED,YAAAK,CAAaL,GACT,MAAM1B,EAAeR,KAAKS,WAAWC,cAAc,UAEnDF,EAAarB,MAAMqD,UAAY,SAASN,KACxC1B,EAAarB,MAAMsD,gBAAkB,WAGrC,MAAMC,EAAc1C,KAAKG,eAAiB+B,EACpCS,EAAe3C,KAAKI,gBAAkB8B,EAC5ClC,KAAKb,MAAMyD,QAAU,eACrB5C,KAAKb,MAAM0B,MAAQ,GAAG6B,MACtB1C,KAAKb,MAAM2B,OAAS,GAAG6B,KAC1B,CAED,UAAApB,CAAWH,EAAcE,GACrB,MAAMY,EAAclC,KAAK+B,qBAAqBX,EAAcE,GAC5DtB,KAAKuC,aAAaL,EACrB,SAELW,eAAeC,OAAO,qBAAsBlD"}